{% sw_extends '@Storefront/storefront/page/product-detail/media-gallery.html.twig' %}

{% block page_product_detail_media_gallery %}
    {# Detect if user is on mobile #}
    {% set isMobile = app.request.headers.get('user-agent') matches '/(Mobile|Android|iPhone|iPad|iPod)/i' %}

    {# --- MOBILE: Custom PC Carousel --- #}
    {% if isMobile %}
        <div class="pc-carousel-wrapper">
            <div class="pc-carousel" data-pc-carousel>
                {% for media in page.product.media %}
                    <div class="pc-slide" data-pc-slide>
                        <img src="{{ media.media.url }}"
                             alt="{{ media.media.translated.alt ?? page.product.translated.name }}"
                             loading="lazy" />
                    </div>
                {% endfor %}
            </div>

            <div class="pc-dots" data-pc-dots></div>

            <button class="pc-arrow pc-left" data-pc-prev aria-label="previous image">‹</button>
            <button class="pc-arrow pc-right" data-pc-next aria-label="next image">›</button>
        </div>
    {% else %}
        {# --- DESKTOP: Restore default Shopware gallery (like your screenshot) --- #}
        {{ parent() }}
    {% endif %}
{% endblock %}
